{"version":3,"sources":["components/comparison/components/comparison-footnote.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,uBAAgF,eAAe,CAAC,CAAA;AAEhG,qCAAkC,sBAAsB,CAAC,CAAA;AACzD,8CAA0C,+BAA+B,CAAC,CAAA;AAC1E,gCAA6B,wBAAwB,CAAC,CAAA;AAQtD;IAKI,YACY,YAA0B,EAC1B,YAAuC,EACvC,QAA2B;QAF3B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,iBAAY,GAAZ,YAAY,CAA2B;QACvC,aAAQ,GAAR,QAAQ,CAAmB;QAL/B,sBAAiB,GAAW,EAAE,CAAC;IAMrC,CAAC;IAEK,gBAAgB,CAAC,IAAW;QAChC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG;gBAC5B,KAAK,EAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;gBAClE,KAAK,EAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAE,GAAG,GAAE,IAAI,CAAC,MAAM,EAAE,GAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;gBAChF,KAAK,EAAC,CAAC;aACV,CAAC;QACN,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,CAAC;QACnD,CAAC;QACD,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,GAAE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,KAAK,GAAG,QAAQ,CAAC;IAE/F,CAAC;IAED,WAAW;QACP,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACzC,CAAC;IAED,WAAW;QACP,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,CAAC;QAC/C,EAAE,CAAA,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAA,CAAC;YAClD,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAClD,CAAC;IACL,CAAC;AACL,CAAC;AAlCG;IAAC,YAAK,EAAE;;6DAAA;AAPZ;IAAC,gBAAS,CAAC;QACP,QAAQ,EAAE,qBAAqB;QAC/B,QAAQ,EAAE,0DAA0D;QACpE,eAAe,EAAE,8BAAuB,CAAC,MAAM;QAC/C,QAAQ,EAAE,MAAM,CAAC,EAAE;KACtB,CAAC;;+BAAA;AACW,mCAA2B,8BAmCvC,CAAA","file":"comparison-footnote.component.js","sourcesContent":["import { Component, Input, ChangeDetectionStrategy, OnChanges, OnDestroy } from '@angular/core';\n\nimport { ComparisonService } from './comparison.service';\nimport { ComparisonCitationService } from './comparison-citation.service';\nimport { CitationPipe } from '../pipes/citation.pipe';\n\n@Component({\n    selector: 'comparison-footnote',\n    template: '<div [innerHtml]=\"compiled_footnote|sanitizeHtml\"></div>',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    moduleId: module.id\n})\nexport class ComparisonFootnoteComponent implements OnChanges, OnDestroy {\n    @Input() footnote: string;\n    \n    private compiled_footnote: string = \"\";\n    \n    constructor(\n        private citationPipe: CitationPipe,\n        private citationServ: ComparisonCitationService,\n        private compServ: ComparisonService\n    ){}\n    \n    private compile_footnote(note:string){\n        if (!this.compServ.footnotes[note]){\n            this.compServ.footnotes[note] = {\n                value:this.citationPipe.transform(note, [this.citationServ, true]),\n                index:(this.compServ.findex++ +\"r\"+ Math.random()*100000).toString().substr(0,5),\n                count:1\n            }; \n        } else {\n            this.compServ.footnotes[this.footnote].count++;\n        }\n        this.compiled_footnote = \"\\\\footref&#123;\"+ this.compServ.footnotes[note].index + \"&#125;\";\n         \n    }\n    \n    ngOnChanges(){\n        this.compile_footnote(this.footnote);\n    }\n    \n    ngOnDestroy(){\n        this.compServ.footnotes[this.footnote].count--;\n        if(this.compServ.footnotes[this.footnote].count == 0){\n            delete this.compServ.footnotes[this.footnote];\n        }\n    }\n}"]}